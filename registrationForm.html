<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="css/lib/bootstrap.min.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com/%22%3E" />
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/a8f8b3334a.js" crossorigin="anonymous"></script>
  <style>
    /* Background*/

    html {
      background: url(images/background.jpg) no-repeat center center fixed;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
      text-align: center;
    }

    body {
      background: transparent;
      color: #000;
      overflow-x: hidden;
      font-family: "DM Serif Display", serif;
    }

    .form-control-label {
      margin-bottom: 0;
    }

    input,
    textarea,
    button {
      padding: 8px 15px;
      border-radius: 5px !important;
      margin: 5px 0px;
      box-sizing: border-box;
      border: none;
      font-size: 18px !important;
      font-weight: 300;
      background-color: rgba(255, 255, 255, 0.55);
    }

    input:focus,
    textarea:focus {
      outline: none;
    }

    .formspacing {
      letter-spacing: 1px;
    }

    .card {
      padding: 30px 40px;
      margin-top: 60px;
      margin-bottom: 60px;
      border: none;
      box-shadow: 0 18px 22px 0 rgba(0, 0, 0, 0.2);
      background: rgba(255, 255, 255, 0.4);
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(6.4px);
      -webkit-backdrop-filter: blur(6.4px);
    }

    .card2 {
      padding: 30px 40px;
      margin-top: 60px;
      margin-bottom: 60px;
      border: none;
      box-shadow: 0 18px 22px 0 rgba(0, 0, 0, 0.2);
      background: rgba(255, 255, 255, 0.4);
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(6.4px);
      -webkit-backdrop-filter: blur(6.4px);
    }

    /* Bar Animation */
    .bar {
      position: relative;
      display: block;
      width: auto;
    }

    .bar:before,
    .bar:after {
      content: "";
      height: 2px;
      width: 0;
      bottom: 1px;
      position: absolute;
      background: #000000;
      transition: 0.2s ease all;
      -moz-transition: 0.2s ease all;
      -webkit-transition: 0.2s ease all;
    }

    .bar:before {
      left: 50%;
    }

    .bar:after {
      right: 50%;
    }

    input:focus~.bar:before,
    input:focus~.bar:after {
      width: 50%;
    }

    .dashCard {
      width: 150px;
      height: 150px;
    }

    .hidden {
      display: none !important;
    }
  </style>
  <title>Final Project</title>
</head>

<body>
  <!--LOGIN DIV-->
  <div id="divLogin" class="container-fluid px-1 py-5 mx-auto">
    <div class="row d-flex justify-content-center">
      <div class="col-xl-7 col-lg-8 col-md-9 col-11 text-center">
        <div class="card card2 rounded-5">
          <div class="container-fluid">
            <h1 style="letter-spacing: 4px"><b>LOGIN</b></h1>
          </div>
          <div class="form-group flex-column d-flex">
            <label class="form-control-label px-3">Email</label>
            <input type="text" id="loginEmail" name="loginEmail" placeholder="email@example.com" />
            <span class="bar"></span>
          </div>
          <div class="form-group flex-column d-flex">
            <label class="form-control-label px-3">Password</label>
            <input type="text" id="loginPassword" name="loginPassword" placeholder="Password" />
            <span class="bar"></span>
          </div>
          <div class="row justify-content-center">
            <div class="form-group col-sm-6 mt-4">
              <button type="button" class="btn" id="btnLogin" style="background-color: #bc6c25; color: white; ">
                Login
              </button>
              <div>
                <button type="button" class="btn" id="btnForgotPassword"
                  style="background-color: transparent; color: #bc6c25">
                  Forgot Password?
                </button>
              </div>
            </div>
            <hr />
            <div class="form-group col-sm-6 mt-4">
              <button type="button" class="btn" id="btnCreateAccountLinker"
                style="background-color: #5a3719; color: white; ">
                Create Account
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--REGISTER DIV-->
  <div id="divRegister" class="container-fluid px-1 py-5 mx-auto" style="display: none">
    <div class="row d-flex justify-content-center">
      <div class="col-xl-7 col-lg-8 col-md-9 col-11 text-center">
        <div class="card card2 rounded-5">
          <div class="container-fluid">
            <h1 style="letter-spacing: 4px"><b>REGISTER</b></h1>
          </div>
          <h5 class="text-center mb-4">User Info</h5>
          <form class="form-card">
            <div id="genInfo">
              <div class="row justify-content-between text-left">
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">First name</label>
                  <input type="text" id="inputFirstName" name="firstName" placeholder="First Name" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">Last name </label>
                  <input type="text" id="inputLastName" name="lastName" placeholder="Last Name" />
                  <span class="bar"></span>
                </div>
              </div>
              <div class="row justify-content-between text-left">
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">Email</label>
                  <input type="email" id="inputEmail" name="email" placeholder="email@example.com" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">Password</label>
                  <input type="text" id="inputPassword" placeholder="Password" />
                  <span class="bar"></span>
                </div>
              </div>
            </div>
            <div id="addressInfo">
              <h5 class="text-center mb-4 mt-4">User Address</h5>
              <div class="row justify-content-between text-left">
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">Address Line 1</label>
                  <input type="text" id="inputAddress1" name="address-1"
                    placeholder="Street address, P.O. Box, Company Name, etc" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">Address Line 2</label>
                  <input type="text" id="inputAddress2" name="address-2" placeholder="Apartment, Suite , Unit, etc" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">City</label>
                  <input type="text" id="inputCity" name="city" placeholder="City" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-3 flex-column d-flex">
                  <label class="form-control-label px-3">State</label>
                  <input type="text" id="inputState" name="state" placeholder="State" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-3 flex-column d-flex">
                  <label class="form-control-label px-3">Zip Code</label>
                  <input type="number" id="inputZipcode" name="zipcode" placeholder="Zip Code" />
                  <span class="bar"></span>
                </div>
              </div>
            </div>
            <div id="difAddressCheck" class="justify-content-center d-flex">
              <div>Coop Address different from Home Address?</div>
              <div class="form-check form-switch ms-3">
                <input class="form-check-input" type="checkbox" id="diffAddressCheck" />
              </div>
            </div>
            <div id="coopInfo" style="display: none">
              <h5 class="text-center mb-4 mt-4">Coop Address</h5>
              <div class="row justify-content-between text-left">
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">Address Line 1</label>
                  <input type="text" id="inputCoopAddress1" name="address-1"
                    placeholder="Street address, P.O. box, company name, c/o" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">Address Line 2</label>
                  <input type="text" id="inputCoopAddress2" name="address-2"
                    placeholder="Apartment, suite , unit, building, floor, etc" />
                  <span class="bar"></span>
                </div>

                <div class="form-group col-sm-6 flex-column d-flex">
                  <label class="form-control-label px-3">City</label>
                  <input type="text" id="inputCoopCity" name="city" placeholder="Enter your city" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-3 flex-column d-flex">
                  <label class="form-control-label px-3">State</label>
                  <input type="text" id="inputCoopState" name="state" placeholder="Enter your state" />
                  <span class="bar"></span>
                </div>
                <div class="form-group col-sm-3 flex-column d-flex">
                  <label class="form-control-label px-3">Zipcode</label>
                  <input type="number" id="inputCoopZipcode" name="zipcode" placeholder="Enter your zipcode" />
                  <span class="bar"></span>
                </div>
              </div>
            </div>
            <div class="row justify-content-center">
              <div class="form-group col-sm-6 mt-3">
                <button type="button" class="btn" id="btnCreateAccount" style="background-color: #bc6c25; color: white">
                  Create Account
                </button>
                <div>
                  Already have an account?
                  <button type="button" id="btnReturnLogin" style="background-color: transparent; color: #bc6c25">
                    Log In
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!--HOMEPAGE DIV-->
  <div id="divHome" class="container-fluid px-1 mx-auto" style="display: none">
    <div class="row flex-nowrap">
      <div id="divSideNav" class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-dark">
        <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">
          <span class="fs-5 d-none d-sm-inline">Chicken Coop</span>
          <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
            <li>
              <button id="btnNavDashBoard" data-bs-toggle="collapse" class="nav-link px-0 align-middle">
                <i class="fa-solid fa-table-columns"></i>
                <span class="ms-1 d-none d-sm-inline">Dashboard</span>
              </button>
            </li>
            <li>
              <button id="btnNavSettings" class="nav-link px-0 align-middle">
                <i class="fa-solid fa-gear"></i>
                <span class="ms-1 d-none d-sm-inline">Settings</span>
              </button>
            </li>
            <li>
              <button id="btnNavWarnings" class="nav-link px-0 align-middle">
                <i class="fa-solid fa-triangle-exclamation"></i>
                <span class="ms-1 d-none d-sm-inline">Warnings</span>
              </button>
            </li>
          </ul>
          <hr />
          <div class="pb-4">
            <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start">
              <li>
                <button id="btnNavLogout" class="nav-link px-0 align-middle">
                  <i class="fa-solid fa-arrow-right-from-bracket"></i>
                  <span class="ms-1 d-none d-sm-inline">Log out</span>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div id="divContent" class="col py-3 d-flex justify-content-center">
        <div id="divDashboard" class="col py-3 d-flex justify-content-center">
          <div class="card col-md-10 col-8 h-auto justify-content-center" style="background-color: none;">
            <div class="row justify-content-evenly">
              <div class="card col-9 dashCard">
                <input type="number" id="inputAddEggs" name="addEggs" />
                <button type="button" class="btn" id="btnAddEggs" style="background-color: #bc6c25; color: white">
                  Add Eggs
                </button>
              </div>
              <div class="card col-9 dashCard">
                <h6>Total Eggs:</h6>
                <h4>3894</h4>
              </div>
              <div class="card col-9 dashCard">
                <h6>Current Temp:</h6>
                <h4>56Â°</h4>
              </div>
              <div class="card col-9 dashCard">
                <h6>Humidity:</h6>
                <h4>46%</h4>
              </div>
              <div class="card col-9 dashCard">
                <h6>Cleanout In:</h6>
                <h4 id="cleanoutDay"></h4>
              </div>
            </div>
            <div class="m-3">
              <canvas class="d-none d-sm-block" id="myChart"
                style="background-color: rgba(255, 255, 255, 0.45);"></canvas>
            </div>
          </div>
        </div>

        <div id="divSettings" class="col py-3" style="display: none;">
          <div id="div" class="col py-3 d-flex justify-content-center">
            <div class="card col-md-10 col-8" style="background-color: none;">
              <h1>Settings</h1>
              <div class="row d-flex p-3">
                <div class="col-4">
                  <div class="card col-12">
                    <span>Coop Door</span>
                    <div class="input-group mb-3 justify-content-center">
                      <label class="input-group-text" for="openTimeDoor">Automatic Open Time</label>
                      <input data-settings="openTimeDoor" id="openTimeDoor" class="" type="time" class="form-control"
                        placeholder="Time" aria-label="Time" aria-describedby="basic-addon2">
                    </div>
                    <div class="input-group mb-3 justify-content-center">
                      <label class="input-group-text" for="closeTimeDoor">Automatic Close Time</label>
                      <input data-settings="closeTimeDoor" id="closeTimeDoor" class="" type="time" class="form-control"
                        placeholder="Time" aria-label="Time" aria-describedby="basic-addon2">
                    </div>
                    <div class="row d-flex justify-content-center p-3" style="margin: 0 auto;">
                      <div class="form-check form-switch text-center justify-content-center">
                        <input class="form-check-input" type="checkbox" role="switch" id="switchCoopDoor"
                          checked="checked" />
                        <label class="form-check-label" for="switchCoopDoor">Open</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div class="card col-12">
                    <span>Coop Light</span>
                    <div class="input-group mb-3 justify-content-center">
                      <label class="input-group-text" for="onTimeLight">Automatic On Time</label>
                      <input data-settings="onTimeLight" id="onTimeLight" class="settingClass" type="time"
                        class="form-control" placeholder="Time" aria-label="Time" aria-describedby="basic-addon2">
                    </div>
                    <div class="input-group mb-3 justify-content-center">
                      <label class="input-group-text" for="offTimeLight">Automatic Off Time</label>
                      <input data-settings="offTimeLight" id="offTimeLight" class="settingClass" type="time"
                        class="form-control" placeholder="Time" aria-label="Time" aria-describedby="basic-addon2">
                    </div>
                    <div class="row d-flex justify-content-center p-3" style="margin: 0 auto;">
                      <div class="form-check form-switch text-center justify-content-center">
                        <input class="form-check-input" type="checkbox" role="switch" id="switchCoopLight"
                          checked="checked" />
                        <label class="form-check-label" for="switchCoopLight">On</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <!-- <div class="card col-10" style="height: 171%;">
                    <span>Alarms</span>
                    <div class="row d-flex justify-content-center p-3" style="height: 50%;">
                      <h4>LOW FOOD ALARM</h4>
                      <i class="fa-sharp fa-solid fa-check-to-slot" style="font-size: 4em;"></i>
                    </div>
                    <div class="row d-flex justify-content-center p-3" style="height: 50%;">
                      <h4>LOW WATER ALARM</h4>
                      <i class="fa-sharp fa-solid fa-check-to-slot" style="font-size: 4em;"></i>
                    </div>
                  </div> -->
                </div>
              </div>
              <div class="row d-flex p-3">
                <div class="col-4">
                  <div class="card col-12">
                    <span>Coop Heater</span>
                    <div class="input-group mb-3 justify-content-center">
                      <label class="input-group-text" for="onTempHeater">Heater On Temperature</label>
                      <input data-settings="onTempHeater" id="onTempHeater" class="col-10 settingClass"
                        class="form-control" placeholder="Temperature" aria-label="Time"
                        aria-describedby="basic-addon2">
                    </div>
                    <div class="row d-flex justify-content-center p-3">
                      <label class="input-group-text" for="onTempHeater">Heater Timer</label>
                      <input data-settings="heaterTimer" id="heaterTimer" class="settingClass" type="time"
                        class="form-control" placeholder="Time" aria-label="Time" aria-describedby="basic-addon2">
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div class="card col-12">
                    <span>Coop Fan</span>
                    <div class="input-group mb-3 justify-content-center">
                      <label class="input-group-text" for="onTempFan">Fan On Temperature</label>
                      <input data-settings="onTempFan" id="onTempFan" class="col-10 settingClass" class="form-control"
                        placeholder="Temperature" aria-label="Time" aria-describedby="basic-addon2">
                    </div>
                    <div class="row d-flex justify-content-center p-3">
                      <label class="input-group-text" for="onTempHeater">Fan Timer</label>
                      <input data-settings="lightTimer" id="lightTimer" class="settingClass" type="time"
                        class="form-control" placeholder="Time" aria-label="Time" aria-describedby="basic-addon2">
                    </div>
                  </div>
                  <button type="button" class="btn" id="btnSaveSettings"
                    style="background-color: #bc6c25; color: white">
                    Save Settings
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>




  <script src="js/lib/bootstrap.bundle.min.js"></script>
  <script src="js/lib/jquery-3.6.1.min.js"></script>
  <script src="js/lib/sweetalert2.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    let dashboardActive = true;
    let settingsActive = false;
    let base_url = "https://simplecoop.swollenhippo.com/"
    let coopID = ''
    let strSessionID = ''
    let arrDays = [];
    let arrTemp = [];
    let arrHumid = [];
    let arrEggs = [];
    let eggsTotal = '';

    // Handling all Login Functions and CRUD Info///////////////

    $("#btnLogin").on("click", function () {
      let strEmail = $("#loginEmail").val();
      let strPassword = $("#loginPassword").val();
      $.post(base_url + "sessions.php", { Email: strEmail, Password: strPassword }).done(function (data) {
        let objResult = JSON.parse(data);
        let outcome = objResult.Outcome;
        if (outcome != "Bad Username or Password") {
          sessionStorage.setItem("SessionID", objResult.SessionID);
          strSessionID = sessionStorage.getItem("SessionID");
          $("#divLogin").slideToggle();
          $("#divHome").slideToggle();
        }
        else {
          Swal.fire({
            title: "Error!",
            icon: "error",
            html: "Invalid Username or Password",
          });
        }
      });
    });

    $("#btnReturnLogin").on("click", function () {
      $("#divLogin").slideToggle();
      $("#divRegister").slideToggle();
    });

    $("#btnNavLogout").on("click", function () {
      $("#divLogin").slideToggle();
      $("#divHome").slideToggle();
      sessionStorage.removeItem("SessionID");
    });

    $("#btnCreateAccountLinker").on("click", function () {
      $("#divRegister").slideToggle();
      $("#divLogin").slideToggle();
    });


    $("#btnCreateAccount").on("click", function () {
      let blnError = false;
      let strErrorMessage = "";

      let strEmail = $("#inputEmail").val();
      let strFirstName = $("#inputFirstName").val();
      let strLastName = $("#inputLastName").val();
      let strPassword = $("#inputPassword").val();
      let strStreet1 = $("#inputAddress1").val();
      let strStreet2 = $("#inputAddress2").val();
      let strCity = $("#inputCity").val();
      let strState = $("#inputState").val();
      let strZIP = $("#inputZipcode").val();

      if ($("#inputFirstName").val() == "") {
        strErrorMessage += "<p>Please enter your first name</p>";
        blnError = true;
      }
      if ($("#inputLastName").val() == "") {
        strErrorMessage += "<p>Please enter your last name</p>";
        blnError = true;
      }
      if (
        !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(
          $("#inputEmail").val()
        )
      ) {
        strErrorMessage += "<p>Please enter a valid email</p>";
        blnError = true;
      }
      if (
        !/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,64}$/.test(
          $("#inputPassword").val()
        )
      ) {
        strErrorMessage += "<p>Please enter a valid password</p>";
        blnError = true;
      }
      if ($("#inputAddress1").val() == "") {
        strErrorMessage += "<p>Please enter your address</p>";
        blnError = true;
      }
      if ($("#inputCity").val() == "") {
        strErrorMessage += "<p>Please enter your city</p>";
        blnError = true;
      }
      if ($("#inputState").val() == "") {
        strErrorMessage += "<p>Please enter your state</p>";
        blnError = true;
      }
      if ($("#inputZipcode").val() == "") {
        strErrorMessage += "<p>Please enter your zipcode</p>";
        blnError = true;
      }
      if ($("#diffAddressCheck").is(":checked")) {
        if ($("#inputCoopAddress1").val() == "") {
          strErrorMessage += "<p>Please enter your coop address</p>";
          blnError = true;
        }
        if ($("#inputCoopCity").val() == "") {
          strErrorMessage += "<p>Please enter your coop city</p>";
          blnError = true;
        }
        if ($("#inputCoopState").val() == "") {
          strErrorMessage += "<p>Please enter your coop state</p>";
          blnError = true;
        }
        if ($("#inputCoopZipcode").val() == "") {
          strErrorMessage += "<p>Please enter your coop zipcode</p>";
          blnError = true;
        }
      }

      if (blnError == true) {
        Swal.fire({
          title: "Error!",
          icon: "error",
          html: strErrorMessage,
        });
      } else {
        Swal.fire({
          title: "Success!",
          icon: "success",
          html: "Account created successfully",
        });
        $.post(base_url + "coop.php")
          .done(function (data) {
            let objResult = JSON.parse(data);
            coopID = objResult.CoopID;

            $.post(base_url + "users.php", { Email: strEmail, Password: strPassword, FirstName: strFirstName, LastName: strLastName, CoopID: coopID }
            ).done(function (data) {
              let objResult = JSON.parse(data);
              let outcome = objResult.Outcome;
              if (outcome == "New User Created") {
                $.post(base_url + "useraddress.php", { Email: strEmail, Street1: strStreet1, Street2: strStreet2, City: strCity, State: strState, ZIP: strZIP });
                $.post(base_url + "sessions.php", { Email: strEmail, Password: strPassword }).done(function (data) {
                  sessionStorage.setItem("SessionID", JSON.parse(data).SessionID);
                  strSessionID = sessionStorage.getItem("SessionID");

                  if ($("#diffAddressCheck").is(":checked")) {
                    strStreet1 = $("#inputCoopAddress1").val();
                    strStreet2 = $("#inputCoopAddress2").val();
                    strCity = $("#inputCoopCity").val();
                    strState = $("#inputCoopState").val();
                    strZIP = $("#inputCoopZipcode").val();
                  }
                  $.ajax({
                    type: 'PUT',
                    url: base_url + "coop.php",
                    contentType: 'application/json',
                    data: { SessionID: strSessionID, Street1: strStreet1, Street2: strStreet2, City: strCity, State: strState, ZIP: strZIP },
                    success: function (data) { }
                  });
                  let strSettings = '';
                  let strValue = '';
                  $('.settingClass').each(function (i, obj) {
                    strSettings = $(this).attr("data-settings");
                    strValue = $(obj).val();
                    $.post('https://simplecoop.swollenhippo.com/settings.php', { SessionID: strSessionID, setting: strSettings, value: "0" }).done(function (data) {
                      console.log(data);
                    })
                  });
                  $("#divRegister").slideToggle();
                  $("#divHome").slideToggle();
                });
              }
            });
          });
      }
    });


    $("#diffAddressCheck").on("change", function () {
      console.log($(this).is(":checked"));
      $("#coopInfo").slideToggle();
    });

    // Handling Dashboard Naviagtion and CRUD Functions///////

    $("#btnNavDashBoard").on("click", function () {
      let strobDateTime = new Date();
      let strHumidity = "High";
      let strTemp = 76;
      if (!dashboardActive) {
        $("#divDashboard").show();
        $("#divSettings").hide();
        dashboardActive = true;
        settingsActive = false;
      }
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-23', temperature: '46', humidity: '52' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
        })
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-24', temperature: '54', humidity: '62' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
        })
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-25', temperature: '55', humidity: '77' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
        })
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-26', temperature: '51', humidity: '82' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
        })
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-27', temperature: '55', humidity: '80' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
        })
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-28', temperature: '50', humidity: '78' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
        })
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-29', temperature: '52', humidity: '74' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
        })
      $.post('https://simplecoop.swollenhippo.com/environment.php', { SessionID: strSessionID, observationDateTime: '2022-11-30', temperature: '53', humidity: '72' })
        .done(function (bob) {
          let objResults = JSON.parse(bob);
          console.log(objResults);
          $.getJSON(base_url + 'environment.php', { SessionID: strSessionID, days: 7 }, function (result) {
            if (result) {
              if (result.length > 0) {
                $.each(result, function (index, logEntry) {
                  arrTemp.push(logEntry.Temperature);
                  arrHumid.push(logEntry.Humidity);
                  arrDays.push(logEntry.ObservationDateTime);
                })
              }
            }
          })

        });
    });

    // Handling Egg CRUD Functions//////

    $("#btnAddEggs").on("click", function () {
      let strEggs = $('#inputAddEggs').val();
      let DateTime = new Date().toISOString({year:"numeric", month:"numeric", day:"numeric"});
      console.log(DateTime);
      let strobDateTime = DateTime.replace('/','-');
      strobDateTime = strobDateTime.replace('/','-');
      strobDateTime = strobDateTime.substring(0,10);
      console.log(strobDateTime);
      $.post(base_url + "eggs.php", { SessionID: strSessionID, observationDateTime: strobDateTime, eggs: strEggs }).done(function (data) {
        $.getJSON(base_url + "eggs.php", { SessionID: strSessionID, days: 7 }).done(function (result) {
          if (result) {
              $.each(result, function (index, logEntry) {
                arrEggs.push(logEntry.Harvested);
                console.log(arrEggs);
              });
          }
        });
      });
    });

    // Handling all Setting CRUD Functions//////

    $("#btnNavSettings").on("click", function () {
      if (!settingsActive) {
        $("#divDashboard").attr("style", "display: none !important");
        $("#divSettings").show();
        dashboardActive = false;
        settingsActive = true;;
      }
      let strSettings = '';
      let strValue = '';
      $('.settingClass').each(function (i, obj) {
        strSettings = $(this).attr("data-settings");
        $.get(base_url + "settings.php", { SessionID: strSessionID, setting: strSettings }).done(function (data) {
          let objValue = JSON.parse(data);
          //$(this).val() = objValue.Value;
        });
      });
    });

    $("#btnSaveSettings").on("click", function () {
      let strSettings = '';
      let strValue = '';
      $('.settingClass').each(function (i, obj) {
        strSettings = $(this).attr("data-settings");
        strValue = $(obj).val();

        $.ajax({
          type: 'PUT',
          url: base_url + "settings.php",
          contentType: 'application/json',
          data: { SessionID: strSessionID, setting: strSettings, value: strValue },
          success: function (data) {
            console.log(data);
          }
        });
      });
    });

    $("#btnNavWarnings").on("click", function () {
      Swal.fire({
        title: 'You have 3 warnings',
        icon: 'warning',
        confirmButtonText: 'Ok'
      })
    });

    <!--All Info needed for Graph. -->
    const data = {
      labels: arrDays,
      datasets: [{
        label: 'Humidity',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: arrHumid,
      },
      {
        label: 'Temperature',
        backgroundColor: 'rgb(0, 99, 132)',
        borderColor: 'rgb(0, 99, 132)',
        data: arrTemp,
      },
      ]
    };

    const config = {
      type: 'line',
      data: data,
      options: {}
    };
  </script>
  <script>
    const myChart = new Chart(
      document.getElementById('myChart'),
      config
    );
  </script>
  <script>
    // Set the date we're counting down to
    var countDownDate = new Date("Jan 15, 2023 15:37:25").getTime();

    // Update the count down every 1 second
    var x = setInterval(function () {

      // Get today's date and time
      var now = new Date().getTime();

      // Find the distance between now and the count down date
      var distance = countDownDate - now;

      // Time calculations for days, hours, minutes and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      var seconds = Math.floor((distance % (1000 * 60)) / 1000);

      // Display the result in the element with id="demo"
      document.getElementById("cleanoutDay").innerHTML = days + " Days"

      // If the count down is finished, write some text
      if (distance < 0) {
        clearInterval(x);
        document.getElementById("cleanoutDay").innerHTML = "EXPIRED";
      }
    }, 1000);
  </script>
</body>

</html>